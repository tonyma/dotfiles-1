# TODO: judge distributions (command -v pacman?)
sudo pacman -S yarn \
          xorg-font-util \
          xorg-fonts-100dpi \
          xorg-fonts-75dpi \
          xorg-fonts-alias \
          xorg-fonts-cyrillic \
          xorg-fonts-encodings \
          xorg-fonts-misc \
          xorg-fonts-type1 \
          zsh-syntax-highlighting \
          zsh-completions \
          linux-headers \
          wget \
          gvim \
          tig \
          terraform \
          sqlite \
          ripgrep \
          postgresql \
          mysql \
          jq \
          inotify-tools \
          hub \
          httpie \
          go \
          git \
          docker \
          aws-cli \
          asciinema \
          gnome-keyring seahorse libgnome-keyring \
          diff-so-fancy \
          python-language-server \
          lxqt sddm \
          autorandr xorg-xdpyinfo

yarn global add \
          typescript-language-server \
          vim-language-server

GO111MODULE=on go get golang.org/x/tools/gopls@latest
go get github.com/mattn/efm-langserver

# link configurations
ln -s "${DOTFILES}/vim" "${HOME}/.vim"
rm "${HOME}/.bash_profile" && ln -s "${DOTFILES}/bash/bash_profile" "${HOME}/.bash_profile"
rm "${HOME}/.xinitrc" && ln -s "${DOTFILES}/X11/xinitrc" "${HOME}/.xinitrc"

# register userjobs
mkdir -p ~/.local/share/systemd/user/
find ${DOTFILES}/userjob -maxdepth 1 -name 'userjob.*' | while read source; do
  ln -sf "${source}" "${HOME}/.local/share/systemd/user/${source##*/}"
done
systemctl --user daemon-reload
systemctl --user enable userjob.timer
systemctl enable sddm
